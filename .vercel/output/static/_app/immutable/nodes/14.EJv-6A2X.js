import{t as f,a as n}from"../chunks/Bra_S4fl.js";import{p as H,q as I,s as m,f as J,a as K,$ as L,c,r as u,b as x,t as M,g as p,d as r,n as Q}from"../chunks/BXvjSyo1.js";import{s as B}from"../chunks/cMSbZ_VT.js";import{i as A}from"../chunks/ChysxtMs.js";import{h as R}from"../chunks/UyLqrWNA.js";import{d as U}from"../chunks/CkAdDOH0.js";import{s as V}from"../chunks/BIYmJOqi.js";import{p as W}from"../chunks/BpRsWIjX.js";import{s as X,a as Z}from"../chunks/DukglcIF.js";import{p as aa}from"../chunks/BL4AGPDN.js";import{S as sa}from"../chunks/WJTXZf24.js";const ta=(P,o,l,i,y,a,w)=>{r(o,!0),r(l,"Sending...");let d=i==null?void 0:i.email;d&&y.auth.resetPasswordForEmail(d,{redirectTo:`${a().url.origin}/auth/callback?next=%2Faccount%2Fsettings%2Freset_password`}).then(v=>{r(w,W(!v.error)),r(o,!1),r(l,"Send Forgot Password Email")})};var ea=f(`<div class="font-bold">Set Password By Email</div> <div>You use oAuth to sign in ("Sign in with Github" or similar). You can
          continue to access your account using only oAuth if you like!</div>`,1),oa=f('<div class="font-bold">Change Password By Email</div>'),ia=f(`<div class="card p-6 pb-7 mt-8 max-w-xl flex flex-col md:flex-row shadow-sm max-w-md"><div class="flex flex-col gap-y-4"><!> <div> </div> <button> </button> <div>Sent email! Please check your inbox and use the link to set your
        password.</div></div></div>`),ra=f('<h1 class="text-2xl font-bold mb-6">Change Password</h1> <!>',1);function ga(P,o){var k,E;H(o,!0);const l=X(),i=()=>Z(aa,"$page",l);I("adminSection").set("settings");let{user:a,supabase:w}=o.data,d=!!((k=a==null?void 0:a.amr)!=null&&k.find(s=>s.method==="password")),v=!!((E=a==null?void 0:a.amr)!=null&&E.find(s=>s.method==="oauth")),S=x(!1),C=x("Send Set Password Email"),h=x(!1);var T=ra();R(s=>{L.title="Change Password"});var N=m(J(T),2);{var O=s=>{sa(s,{title:"Change Password",editable:!0,saveButtonTitle:"Change Password",successTitle:"Password Changed",successBody:"On next sign in, use your new password.",formTarget:"/account/api?/updatePassword",fields:[{id:"newPassword1",label:"New Password",initialValue:"",inputType:"password"},{id:"newPassword2",label:"Confirm New Password",initialValue:"",inputType:"password"},{id:"currentPassword",label:"Current Password",initialValue:"",inputType:"password"}]})},Y=s=>{var g=ia(),F=c(g),$=c(F);{var q=e=>{var _=ea();Q(2),n(e,_)},G=e=>{var _=oa();n(e,_)};A($,e=>{v?e(q):e(G,!1)})}var b=m($,2),j=c(b);u(b);var t=m(b,2);t.__click=[ta,S,C,a,w,i,h];var z=c(t,!0);u(t);var D=m(t,2);u(F),u(g),M(()=>{B(j,`The button below will send you an email at ${(a==null?void 0:a.email)??""} which will allow
        you to set your password.`),V(t,`btn btn-outline btn-wide ${(p(h)?"hidden":"")??""}`),t.disabled=p(S),B(z,p(C)),V(D,`success alert alert-success ${(p(h)?"":"hidden")??""}`)}),n(s,g)};A(N,s=>{d?s(O):s(Y,!1)})}n(P,T),K()}U(["click"]);export{ga as component};
